<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="636px" preserveAspectRatio="none" style="width:455px;height:636px;background:#FFFFFF;" version="1.1" viewBox="0 0 455 636" width="455px" zoomAndPan="magnify"><defs><filter height="300%" id="f1azgdrj27x14o" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="290.23" cy="16" fill="#000000" filter="url(#f1azgdrj27x14o)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><g id="Idle"><rect fill="#FEFECE" filter="url(#f1azgdrj27x14o)" height="50.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="66" x="257.23" y="87"/><line style="stroke:#A80036;stroke-width:1.5;" x1="257.23" x2="323.23" y1="113.2969" y2="113.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="278.23" y="104.9951">Idle</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="46" x="262.23" y="129.4355">cnt = 0</text></g><g id="BtnPressed"><rect fill="#FEFECE" filter="url(#f1azgdrj27x14o)" height="50.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="101" x="107.73" y="244"/><line style="stroke:#A80036;stroke-width:1.5;" x1="107.73" x2="208.73" y1="270.2969" y2="270.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="117.73" y="261.9951">BtnPressed</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="66" x="112.73" y="286.4355">timer.start</text></g><g id="BtnReleased"><rect fill="#FEFECE" filter="url(#f1azgdrj27x14o)" height="64.2344" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="109" x="164.73" y="431"/><line style="stroke:#A80036;stroke-width:1.5;" x1="164.73" x2="273.73" y1="457.2969" y2="457.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="174.73" y="448.9951">BtnReleased</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="40" x="169.73" y="473.4355">cnt++</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="66" x="169.73" y="487.4043">timer.start</text></g><g id="LongTap"><rect fill="#FEFECE" filter="url(#f1azgdrj27x14o)" height="50.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="80" x="96.23" y="87"/><line style="stroke:#A80036;stroke-width:1.5;" x1="96.23" x2="176.23" y1="113.2969" y2="113.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="106.23" y="104.9951">LongTap</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51" x="101.23" y="129.4355">callback</text></g><g id="ShortTap"><rect fill="#FEFECE" filter="url(#f1azgdrj27x14o)" height="50.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="109" x="253.73" y="572"/><line style="stroke:#A80036;stroke-width:1.5;" x1="253.73" x2="362.73" y1="598.2969" y2="598.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="276.73" y="589.9951">ShortTap</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="89" x="258.73" y="614.4355">callback( cnt )</text></g><!--MD5=[38f1f8b7f214ff6bc6d4b705f682283d]
link *start to Idle--><path d="M290.23,26.01 C290.23,38.7 290.23,62.41 290.23,81.57 " fill="none" id="*start-to-Idle" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="290.23,86.84,294.23,77.84,290.23,81.84,286.23,77.84,290.23,86.84" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f1863187ad24945494cbcc28a3719543]
link Idle to BtnPressed--><path d="M285.64,137.41 C280.45,159.49 270.15,191.84 251.23,214 C240.99,225.99 227.39,235.95 213.75,243.91 " fill="none" id="Idle-to-BtnPressed" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="209.13,246.53,218.9329,245.5795,213.4817,244.0678,214.9934,238.6167,209.13,246.53" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="278.23" y="195.0669">Button press</text><!--MD5=[5490908cc3ed5460b631c65c19ceba67]
link BtnPressed to BtnReleased--><path d="M107.48,276.79 C78.45,283.56 44.31,297.07 26.23,324 C7.15,352.41 6,373.39 26.23,401 C56.43,442.21 114.58,456.29 159.19,460.76 " fill="none" id="BtnPressed-to-BtnReleased" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="164.29,461.23,155.6941,456.4227,159.311,460.7722,154.9615,464.3891,164.29,461.23" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="54.23" y="337.0669">Button release</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="91.23" y="352.1997">and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="77.23" y="367.3325">(cnt &gt; 0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="13" x="96.73" y="382.4653">or</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="31.23" y="397.5981">timer.delta &lt; LongTap)</text><!--MD5=[1340e9cb4894f55d4bdddbb0bfbf6a80]
link BtnReleased to BtnPressed--><path d="M213.18,430.77 C207.26,402.45 197.23,359.78 184.23,324 C181.2,315.66 177.3,306.88 173.45,298.88 " fill="none" id="BtnReleased-to-BtnPressed" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="171.07,294.02,171.4294,303.8623,173.2661,298.5119,178.6164,300.3486,171.07,294.02" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="237.23" y="352.0669">Button press</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="268.23" y="367.1997">and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="211.23" y="382.3325">timer.delta &lt; NextTap</text><!--MD5=[861ccd80775699c0e561b80160eb1b5d]
link BtnPressed to LongTap--><path d="M113.71,243.97 C103.1,235.94 93.15,225.93 87.23,214 C77.95,195.29 79.71,186.49 87.23,167 C90.91,157.46 97.15,148.56 103.96,140.85 " fill="none" id="BtnPressed-to-LongTap" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="107.35,137.17,98.3157,141.092,103.9675,140.8522,104.2073,146.504,107.35,137.17" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="136.23" y="180.0669">cnt == 0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="155.23" y="195.1997">and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="92.23" y="210.3325">timer.delta &gt;= LongTap</text><!--MD5=[42b01b971c119abb260f9e2e884b261d]
link BtnReleased to ShortTap--><path d="M210.69,495.08 C208.3,510.17 208.22,528.01 216.23,542 C223.75,555.14 235.86,565.4 248.84,573.27 " fill="none" id="BtnReleased-to-ShortTap" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="253.28,575.85,247.5182,567.8624,248.9601,573.3324,243.4901,574.7743,253.28,575.85" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="217.23" y="538.0669">timer.delta &gt;= NextTap</text><!--MD5=[bea25241317e71434b8de197a872bd79]
link ShortTap to Idle--><path d="M349.94,571.8 C360.09,563.72 369.62,553.72 375.23,542 C447.16,391.63 448.26,313.76 369.23,167 C360.23,150.29 343.53,137.74 327.79,128.96 " fill="none" id="ShortTap-to-Idle" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="323.38,126.59,329.3852,134.3962,327.7755,128.9733,333.1984,127.3635,323.38,126.59" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0adda31574acc8dadcd294f32db1b584]
link LongTap to Idle--><path d="M176.23,112 C201.42,112 226.61,112 251.8,112 " fill="none" id="LongTap-to-Idle" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="256.83,112,247.83,108,251.83,112,247.83,116,256.83,112" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[38273ae0852ae521576169d53e075e40]
@startuml

[*] - -> Idle

Idle : cnt = 0
Idle - -> BtnPressed : Button press

BtnPressed : timer.start
BtnPressed - -> BtnReleased : Button release \n and \n (cnt > 0 \n or \n timer.delta < LongTap)
BtnPressed - -> LongTap : cnt == 0 \n and \n timer.delta >= LongTap

BtnReleased : cnt++
BtnReleased : timer.start
BtnReleased - -> BtnPressed : Button press \n and \n timer.delta < NextTap
BtnReleased - -> ShortTap : timer.delta >= NextTap

ShortTap : callback( cnt )
ShortTap - -> Idle

LongTap : callback
LongTap -> Idle

@enduml

PlantUML version 1.2021.16(Wed Dec 08 18:25:22 CET 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>